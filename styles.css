html,
body,
#map {
  margin: 0;
  height: 100%;
  overscroll-behavior: none;
  touch-action: none;
  overscroll-behavior-x: none;
  touch-action: pan-y;
}

.filtered-tile {
  filter: grayscale(100%) brightness(60%) contrast(140%) hue-rotate(30deg) sepia(40%) saturate(130%) blur(0.3px);
}

#panel {
  position: absolute;
  bottom: 0;
  left: 0;
  width: 100%;
  max-height: 40%;
  overflow-y: auto;
  background: rgba(20, 20, 20, 0.95);
  color: white;
  padding: 10px;
  font-family: sans-serif;
  z-index: 1000;
}

#add-controls {
  display: flex;
  flex-wrap: wrap;
  margin-bottom: 10px;
  gap: 5px;
}

.character-entry {
  display: flex;
  align-items: center;
  justify-content: space-between;
  background: #333;
  padding: 4px 8px;
  margin: 4px 0;
  border-radius: 4px;
}

.character-entry span {
  flex: 1;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

button {
  cursor: pointer;
}

.marker-label {
  background: black;
  color: white;
  padding: 2px 3px;
  font-size: 8px;
  border-radius: 2px;
}

#blood-frame {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  background: url('marco.png') no-repeat center center;
  background-size: cover;
  z-index: 999;
  opacity: 0.2;
}

.leaflet-bar .pencil-tools .pencil-color {
  display: flex;
  align-items: center;
  gap: 4px;
  padding: 4px;
  background: white;
}

.pencil-color {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 1px solid #888;
  cursor: pointer;
}

.pencil-color.white {
  background: white;
}

.pencil-color.black {
  background: black;
}

.pencil-color.red {
  background: red;
}

.leaflet-bar a.custom-pencil.active {
  background-color: #ddd;
}

.pencil-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  background: white;
  padding: 0px;
}

.color-selector {
  display: none;
  flex-direction: column;
  align-items: center;
  gap: 4px;
  margin-top: 4px;
}

#panel-toggle-container {
  position: absolute;
  top: 52px;
  right: 10px;
  z-index: 1001;
  background: rgba(0, 0, 0, 0.6);
  border-radius: 4px;
  padding: 2px 6px;
}

#toggle-panel {
  background: none;
  border: none;
  color: white;
  font-size: 12px;
  cursor: pointer;
  padding: 2px 4px;
}

#panel.is-hidden { display: none !important; }
/* opcional: ubicar el botón debajo del buscador */
.panel-toggle-wrap { margin-top: 38px; }
.panel-toggle-btn {
  display: inline-block; width: 32px; height: 32px; line-height: 32px;
  text-align: center; font-weight: 700; text-decoration: none; user-select: none;
}

.leaflet-container { touch-action: pan-x pan-y; } /* por defecto */
.drawing .leaflet-container { touch-action: none; } /* si quisieras usar una clase */

#blood-frame { pointer-events:none !important; }


/* que el panel no invada el mapa cuando está visible */
#panel { z-index: 1100; }
.leaflet-container { z-index: 1; }

.pencil-wrapper.mobile-friendly {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
}

.pencil-config-panel {
    display: flex;
    flex-direction: column;
    align-items: center;
    background: rgba(255,255,255,0.9);
    border-radius: 6px;
    padding: 6px;
    box-shadow: 0 1px 5px rgba(0,0,0,0.3);
    z-index: 999;
}

.color-selector, .weight-selector {
    display: flex;
    justify-content: center;
    gap: 4px;
    margin: 4px 0;
    flex-wrap: wrap;
}

.weight-option.selected {
    background: #ddd;
    border-radius: 4px;
}

.leaflet-top, .leaflet-bottom { z-index: 1200 !important; }
